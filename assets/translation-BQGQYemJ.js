import{j as e,r as p,a as w,b as v,L as B}from"./index-fk6BZEE_.js";import{c as N,z as y,T as A,M as j,N as R,A as W,a as k,f as I,b as L,F as P,d as E,u as D,e as T,S as G,C as F,g as _}from"./useDesmos-D7Jye4r5.js";import{S as d,T as l,P as C}from"./Stack-I8mydr5c.js";const{useAppForm:V}=N({fieldComponents:{ArrayItemAddButton:k,ArrayItemRemoveButton:W,NumberTextField:R},formComponents:{FormResetButton:E,FormSubmitButton:P},fieldContext:I,formContext:L}),b=y.string().trim().nonempty().normalize().refine(o=>!isNaN(Number(o))).pipe(y.transform(o=>Number(o))),S=y.object({points:y.object({x:b,y:b}).array().max(4),translation:y.object({x:b,y:b})}),z=({onSubmit:o})=>{const{FormResetButton:h,FormSubmitButton:m,AppField:s,AppForm:i}=V({defaultValues:{points:[{x:"1",y:"1"}],translation:{x:"2",y:"1"}},validators:{onChange:S},onSubmit:({value:t})=>{const u=S.safeParse(t);u.success&&o(u.data)}});return e.jsxs(d,{children:[e.jsx(A,{children:e.jsx(i,{children:e.jsx(h,{})})}),e.jsxs(d,{spacing:.5,padding:1,children:[e.jsx(l,{children:e.jsx(j,{dynamic:!0,children:"ขนาดการเลื่อนขนาน $(x,y)$"})}),e.jsxs(d,{useFlexGap:!0,spacing:.5,direction:"row",flexWrap:"nowrap",children:[e.jsx(s,{name:"translation.x",children:t=>e.jsx(t.NumberTextField,{})}),e.jsx(s,{name:"translation.y",children:t=>e.jsx(t.NumberTextField,{})})]})]}),e.jsx(d,{children:e.jsx(s,{name:"points",mode:"array",children:t=>e.jsx(p.Fragment,{children:t.state.value.map((u,n)=>e.jsxs(d,{spacing:.5,padding:1,sx:{backgroundColor:({palette:{primary:r}})=>n%2===1?void 0:w(r.light,.08)},children:[e.jsxs(d,{width:"100%",spacing:.5,direction:"row",useFlexGap:!0,justifyContent:"space-between",children:[e.jsx(l,{children:e.jsx(j,{children:`พิกัดที่ ${n+1}`})}),e.jsx(t.ArrayItemRemoveButton,{index:n})]}),e.jsxs(d,{spacing:.5,direction:"row",children:[e.jsx(s,{name:`points[${n}].x`,children:r=>e.jsx(r.NumberTextField,{})}),e.jsx(s,{name:`points[${n}].y`,children:r=>e.jsx(r.NumberTextField,{})})]})]},`translate-point-${n}`))})})}),e.jsxs(A,{sx:{justifyContent:"space-between"},children:[e.jsx(i,{children:e.jsx(m,{})}),e.jsx(s,{name:"points",children:t=>e.jsx(t.ArrayItemAddButton,{})})]})]})},H=o=>{const{addLine:h,addPoint:m,addPolygon:s,clearGraph:i,desmosRef:t}=D(o);return{plotTranslation:p.useCallback(n=>{if(t.current===void 0)return;i();const r=t.current,{points:c,translation:x}=n;r.setExpressions([{latex:`T(x,y) = (  
              x + ${x.x} , 
              y + ${x.y}
          )`,hidden:!0}]);for(const[a,g]of c.entries()){const $=String.fromCharCode(65+a);h([`A_{${a}}`,`B_{${a}}`]);const f=m({index:a,texName:"A",tex:`(${g.x}, ${g.y})`,label:$,color:v.A400});m({index:a,texName:"B",tex:`T(
            ${f}.x, 
            ${f}.y
          )`,label:`${$}^{\\prime}`,color:T.A400})}c.length>1&&(s("A",c.length,v.A400),s("B",c.length,T.A400))},[h,m,s,i,t]),desmosRef:t}};function Y(){const{desmosRef:o,plotTranslation:h}=H("#desmos"),[m,s]=p.useState({});p.useEffect(()=>{if(o.current===void 0)return;const n=o.current;for(let r=0;r<4;r++){const c=n.HelperExpression({latex:`B_{${r}}`});c.observe("listValue",()=>{s(x=>{const a={...x};return a[r]=[...c.listValue],a})})}return()=>n.destroy()},[o]);const[i,t]=p.useState(null),u=p.useCallback(n=>{t(n),h(n)},[h]);return e.jsx(G,{slots:{secondary:e.jsx(C,{sx:{height:"100%"},children:e.jsx("div",{id:"desmos",style:{width:"100%",height:"100%"}})}),primary:e.jsx(C,{variant:"outlined",sx:{height:"100%",padding:2,overflowY:"auto",scrollbarWidth:"thin"},children:e.jsxs(d,{spacing:2,children:[e.jsx(l,{color:"textPrimary",sx:{"&:hover":{textDecorationLine:"underline"}},children:e.jsx(B,{to:"/",style:{color:"inherit",textDecorationLine:"none"},children:"กลับหน้าแรก"})}),e.jsxs(d,{spacing:.5,children:[e.jsx(l,{component:"div",variant:"h5",fontWeight:700,children:"(การแปลงทางเรขาคณิต)"}),e.jsx(l,{variant:"h5",component:"div",fontWeight:700,children:"การเลื่อนขนาน"})]}),e.jsx(z,{onSubmit:u}),e.jsx(F,{title:e.jsx(l,{fontWeight:800,children:"ผลลัพท์"}),children:e.jsxs(d,{children:[i===null&&e.jsxs(e.Fragment,{children:[e.jsx(l,{children:"ขนาดการเลื่อนขนาน:"}),e.jsx(j,{dynamic:!0,children:"พิกัดเดิม $\\rightarrow$ พิกัดใหม่:"})]}),i!==null&&e.jsxs(e.Fragment,{children:[e.jsx(j,{dynamic:!0,children:`ขนาดการเลื่อนขนาน: $(${i.translation.x}, ${i.translation.y})$`}),e.jsx(j,{dynamic:!0,children:"พิกัดเดิม $\\rightarrow$ พิกัดใหม่:"}),e.jsx(j,{dynamic:!0,style:{width:"100%",overflow:"auto",scrollbarWidth:"thin"},children:`$$
                          \\begin{array}{lll}
                            ${i.points.map(({x:n,y:r},c)=>{const x=String.fromCharCode(c+65),a=`${x}(${n}, ${r})`,g=m[c];if(g===void 0)return`${a} &\\rightarrow & ${x}^{\\prime}(?,?) `;const[$,f]=g;return`${a} &\\rightarrow & ${x}^{\\prime}(${$},${f}) `}).join("\\\\")}
                          \\end{array}
                        $$`})]})]})}),e.jsx(F,{title:e.jsx(l,{fontWeight:600,children:"สมบัติการเลื่อนขนาน"}),children:e.jsx(l,{children:"ว่าง"})}),e.jsx(F,{title:e.jsx(l,{fontWeight:600,children:"สูตรการเลื่อนขนาน"}),children:e.jsx(l,{children:"ว่าง"})}),e.jsx(_,{})]})})}})}export{Y as component};
